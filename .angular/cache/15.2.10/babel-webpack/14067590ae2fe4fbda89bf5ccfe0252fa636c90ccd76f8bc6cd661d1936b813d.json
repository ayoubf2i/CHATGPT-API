{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ayoub/OneDrive/Bureau/Projet-ChatAPI-Angular-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { GoogleGenerativeAI } from '@google/generative-ai';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/auth\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/Service/auth.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction ChatComponent_ul_20_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", message_r1.content, \" \");\n  }\n}\nfunction ChatComponent_ul_20_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"pre\", 22);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const message_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", message_r1.content, \" \");\n  }\n}\nfunction ChatComponent_ul_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\")(1, \"li\", 17);\n    i0.ɵɵtemplate(2, ChatComponent_ul_20_div_2_Template, 2, 1, \"div\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"li\", 17);\n    i0.ɵɵtemplate(4, ChatComponent_ul_20_div_4_Template, 3, 1, \"div\", 19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const message_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", message_r1.role === \"user\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", message_r1.role === \"system\");\n  }\n}\nexport class ChatComponent {\n  constructor(auth, http, router, _serviceAuth) {\n    this.auth = auth;\n    this.http = http;\n    this.router = router;\n    this._serviceAuth = _serviceAuth;\n    this.userInput = '';\n    this.messages = [];\n    this.generative = new GoogleGenerativeAI('AIzaSyD77VYqM_LsBJGGuHPb0M778C56JNXucqI');\n  }\n  ngOnInit() {\n    if (this._serviceAuth.user == null) {\n      this.router.navigate(['/']);\n    }\n  }\n  getEmailInitial() {\n    const email = this._serviceAuth.user.multiFactor.user.email;\n    if (email && email.length > 0) {\n      return email.charAt(0).toUpperCase(); // Retourne le premier caractère en majuscule\n    } else {\n      return ''; // Retourne une chaîne vide si l'e-mail est vide\n    }\n  }\n\n  sendMessage() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.messages.push({\n        role: \"user\",\n        content: _this.userInput\n      });\n      const model = _this.generative.getGenerativeModel({\n        model: 'gemini-pro'\n      });\n      const result = yield model.generateContent(_this.userInput);\n      _this.userInput = '';\n      const resp = yield result.response;\n      const text = resp.text();\n      _this.messages.push({\n        role: \"system\",\n        content: text\n      });\n    })();\n  }\n  onKeyPress(event) {\n    if (event.key === \"Enter\") {\n      this.sendMessage();\n    }\n  }\n  signOut() {\n    this.auth.signOut().then(() => {\n      this._serviceAuth.user = null;\n      console.log('Déconnexion réussie!');\n      this.router.navigate(['/']);\n    }).catch(error => {\n      console.error('Erreur lors de la déconnexion:', error);\n    });\n  }\n  static #_ = this.ɵfac = function ChatComponent_Factory(t) {\n    return new (t || ChatComponent)(i0.ɵɵdirectiveInject(i1.AngularFireAuth), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.AuthService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChatComponent,\n    selectors: [[\"app-chat\"]],\n    decls: 26,\n    vars: 5,\n    consts: [[\"href\", \"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\", \"rel\", \"stylesheet\", \"integrity\", \"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\", \"crossorigin\", \"anonymous\"], [1, \"container\"], [1, \"row\", \"clearfix\"], [1, \"col-lg-12\"], [1, \"chat\"], [1, \"chat-header\", \"clearfix\"], [1, \"row\"], [1, \"col-lg-6\", 2, \"display\", \"flex\"], [1, \"rounded-box\"], [2, \"margin-top\", \"-6px\", \"font-size\", \"small\"], [1, \"btn\", \"btn-warning\", 3, \"click\"], [1, \"chat-history\", 2, \"height\", \"480px\", \"overflow-y\", \"auto\"], [4, \"ngFor\", \"ngForOf\"], [1, \"chat-message\", \"clearfix\"], [1, \"chat-input\"], [\"type\", \"text \", \"placeholder\", \"Tapez un message...\", 1, \"fill\", 3, \"ngModel\", \"ngModelChange\", \"keypress\"], [\"id\", \"sendButton\", 2, \"color\", \"black\", 3, \"click\"], [1, \"clearfix\"], [\"class\", \"message my-message-chat\", 4, \"ngIf\"], [\"class\", \"message my-message-user\", 4, \"ngIf\"], [1, \"message\", \"my-message-chat\"], [1, \"message\", \"my-message-user\"], [1, \"message-content\"]],\n    template: function ChatComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"link\", 0);\n        i0.ɵɵelementStart(1, \"body\")(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"div\", 7)(9, \"div\", 8)(10, \"span\");\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\")(13, \"h5\");\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\", 9);\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function ChatComponent_Template_button_click_17_listener() {\n          return ctx.signOut();\n        });\n        i0.ɵɵtext(18, \"D\\u00E9connexion\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(19, \"div\", 11);\n        i0.ɵɵtemplate(20, ChatComponent_ul_20_Template, 5, 2, \"ul\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 13)(22, \"div\", 14)(23, \"input\", 15);\n        i0.ɵɵlistener(\"ngModelChange\", function ChatComponent_Template_input_ngModelChange_23_listener($event) {\n          return ctx.userInput = $event;\n        })(\"keypress\", function ChatComponent_Template_input_keypress_23_listener($event) {\n          return ctx.onKeyPress($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"button\", 16);\n        i0.ɵɵlistener(\"click\", function ChatComponent_Template_button_click_24_listener() {\n          return ctx.sendMessage();\n        });\n        i0.ɵɵtext(25, \" Envoyer \");\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵtextInterpolate(ctx.getEmailInitial());\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", ctx._serviceAuth.user.multiFactor.user.email, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx._serviceAuth.user.multiFactor.user.uid, \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.userInput);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel],\n    styles: [\".chat[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%] {\\n    padding: 15px 10px;\\n    border-bottom: 2px solid #e88350\\n}\\n\\n.chat[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n    float: left;\\n    border-radius: 40px;\\n    width: 40px;\\n    margin-right: 10px;\\n}\\n\\n#sendButton[_ngcontent-%COMP%]{\\n    margin-right: 8%;\\n}\\n\\n.rounded-box[_ngcontent-%COMP%] {\\n    width: 40px;\\n    \\n    height: 40px;\\n    \\n    background-color: #bfffbbe8;\\n    \\n    border-radius: 50%;\\n    margin-right: 10px;\\n    display: flex;\\n    justify-content: center;\\n    \\n    align-items: center;\\n}\\n\\n.rounded-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n\\n    font-size: 24px;\\n    text-transform: uppercase;\\n\\n}\\n\\n.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%] {\\n    padding: 20px;\\n\\n}\\n\\n.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n    padding: 0\\n}\\n\\n.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n    list-style: none;\\n    margin-bottom: 30px\\n}\\n\\n.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%] {\\n    color: #444444;\\n    padding: 10px 16px;\\n    line-height: 26px;\\n    font-size: 14px;\\n    border-radius: 8px;\\n    display: inline-block;\\n    \\n}\\n\\n.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .my-message-chat[_ngcontent-%COMP%] {\\n    background-image: linear-gradient(to right, #ea957982, #d3a90066);\\n  \\n   \\n}\\n\\n.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .my-message-user[_ngcontent-%COMP%] {\\n    background: #fbf7cf;\\n}\\n\\n.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .other-message[_ngcontent-%COMP%] {\\n    background: #e8f1f3;\\n    text-align: right\\n}\\n\\n\\n@media only screen and (max-width: 767px) {\\n\\n    .chat-app[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%] {\\n        margin: 0\\n    }\\n\\n    .chat-app[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%] {\\n        border-radius: 0.55rem 0.55rem 0 0\\n    }\\n\\n    .chat-app[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%] {\\n        height: 300px;\\n        overflow-x: auto\\n    }\\n}\\n\\n.chat-input[_ngcontent-%COMP%] {\\n\\n    bottom: 0;\\n    position: absolute;\\n    left: 6;\\n    display: flex;\\n    align-items: center;\\n    width: 93%;\\n    padding: 10px;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n    flex: 1;\\n    padding: 8px;\\n    margin-right: 10px;\\n    border-radius: 5px;\\n    border: 1px solid #ccc;\\n    outline: none;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n    padding: 8px 16px;\\n    border-radius: 5px;\\n    background-image: linear-gradient(to right, #ff9b7afa, #eac636);\\n    \\n    color: white;\\n    border: none;\\n    cursor: pointer;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n    background-image: linear-gradient(to right, #f28d6cfa, #f8d857);\\n    \\n}\\n\\n\\n\\n.message-content[_ngcontent-%COMP%] {\\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\\n    font-size: 14px;\\n    color: #333;\\n    white-space: pre-wrap;\\n    padding: 9px 0px;\\n    margin: 0;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvQ2hhdC9jaGF0L2NoYXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCO0FBQ0o7O0FBRUE7SUFDSSxXQUFXO0lBQ1gsbUJBQW1CO0lBQ25CLFdBQVc7SUFDWCxrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxXQUFXO0lBQ1gsK0JBQStCO0lBQy9CLFlBQVk7SUFDWixnQ0FBZ0M7SUFDaEMsMkJBQTJCO0lBQzNCLCtDQUErQztJQUMvQyxrQkFBa0I7SUFDbEIsa0JBQWtCO0lBQ2xCLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsd0JBQXdCO0lBQ3hCLG1CQUFtQjtBQUN2Qjs7QUFFQTs7SUFFSSxlQUFlO0lBQ2YseUJBQXlCOztBQUU3Qjs7QUFFQTtJQUNJLGFBQWE7O0FBRWpCOztBQUVBO0lBQ0k7QUFDSjs7QUFFQTtJQUNJLGdCQUFnQjtJQUNoQjtBQUNKOztBQUVBO0lBQ0ksY0FBYztJQUNkLGtCQUFrQjtJQUNsQixpQkFBaUI7SUFDakIsZUFBZTtJQUNmLGtCQUFrQjtJQUNsQixxQkFBcUI7O0FBRXpCOztBQUVBO0lBQ0ksaUVBQWlFOzs7QUFHckU7O0FBRUE7SUFDSSxtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxtQkFBbUI7SUFDbkI7QUFDSjs7O0FBR0E7O0lBRUk7UUFDSTtJQUNKOztJQUVBO1FBQ0k7SUFDSjs7SUFFQTtRQUNJLGFBQWE7UUFDYjtJQUNKO0FBQ0o7O0FBRUE7O0lBRUksU0FBUztJQUNULGtCQUFrQjtJQUNsQixPQUFPO0lBQ1AsYUFBYTtJQUNiLG1CQUFtQjtJQUNuQixVQUFVO0lBQ1YsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLE9BQU87SUFDUCxZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLGtCQUFrQjtJQUNsQixzQkFBc0I7SUFDdEIsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEIsK0RBQStEO0lBQy9ELDZDQUE2QztJQUM3QyxZQUFZO0lBQ1osWUFBWTtJQUNaLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSwrREFBK0Q7SUFDL0QsNkNBQTZDO0FBQ2pEOzs7O0FBSUE7SUFDSSw0REFBNEQ7SUFDNUQsZUFBZTtJQUNmLFdBQVc7SUFDWCxxQkFBcUI7SUFDckIsZ0JBQWdCO0lBQ2hCLFNBQVM7QUFDYiIsInNvdXJjZXNDb250ZW50IjpbIlxuXG4uY2hhdCAuY2hhdC1oZWFkZXIge1xuICAgIHBhZGRpbmc6IDE1cHggMTBweDtcbiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2U4ODM1MFxufVxuXG4uY2hhdCAuY2hhdC1oZWFkZXIgaW1nIHtcbiAgICBmbG9hdDogbGVmdDtcbiAgICBib3JkZXItcmFkaXVzOiA0MHB4O1xuICAgIHdpZHRoOiA0MHB4O1xuICAgIG1hcmdpbi1yaWdodDogMTBweDtcbn1cblxuI3NlbmRCdXR0b257XG4gICAgbWFyZ2luLXJpZ2h0OiA4JTtcbn1cblxuLnJvdW5kZWQtYm94IHtcbiAgICB3aWR0aDogNDBweDtcbiAgICAvKiBBZGp1c3QgdGhlIHdpZHRoIGFzIG5lZWRlZCAqL1xuICAgIGhlaWdodDogNDBweDtcbiAgICAvKiBBZGp1c3QgdGhlIGhlaWdodCBhcyBuZWVkZWQgKi9cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYmZmZmJiZTg7XG4gICAgLyogUmVwbGFjZSB3aXRoIHlvdXIgZGVzaXJlZCBiYWNrZ3JvdW5kIGNvbG9yICovXG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIC8qIENlbnRlciBob3Jpem9udGFsbHkgKi9cbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4ucm91bmRlZC1ib3ggc3BhbiB7XG5cbiAgICBmb250LXNpemU6IDI0cHg7XG4gICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcblxufVxuXG4uY2hhdCAuY2hhdC1oaXN0b3J5IHtcbiAgICBwYWRkaW5nOiAyMHB4O1xuXG59XG5cbi5jaGF0IC5jaGF0LWhpc3RvcnkgdWwge1xuICAgIHBhZGRpbmc6IDBcbn1cblxuLmNoYXQgLmNoYXQtaGlzdG9yeSB1bCBsaSB7XG4gICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICBtYXJnaW4tYm90dG9tOiAzMHB4XG59XG5cbi5jaGF0IC5jaGF0LWhpc3RvcnkgLm1lc3NhZ2Uge1xuICAgIGNvbG9yOiAjNDQ0NDQ0O1xuICAgIHBhZGRpbmc6IDEwcHggMTZweDtcbiAgICBsaW5lLWhlaWdodDogMjZweDtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBcbn1cblxuLmNoYXQgLmNoYXQtaGlzdG9yeSAubXktbWVzc2FnZS1jaGF0IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICNlYTk1Nzk4MiwgI2QzYTkwMDY2KTtcbiAgXG4gICBcbn1cblxuLmNoYXQgLmNoYXQtaGlzdG9yeSAubXktbWVzc2FnZS11c2VyIHtcbiAgICBiYWNrZ3JvdW5kOiAjZmJmN2NmO1xufVxuXG4uY2hhdCAuY2hhdC1oaXN0b3J5IC5vdGhlci1tZXNzYWdlIHtcbiAgICBiYWNrZ3JvdW5kOiAjZThmMWYzO1xuICAgIHRleHQtYWxpZ246IHJpZ2h0XG59XG5cblxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjdweCkge1xuXG4gICAgLmNoYXQtYXBwIC5jaGF0IHtcbiAgICAgICAgbWFyZ2luOiAwXG4gICAgfVxuXG4gICAgLmNoYXQtYXBwIC5jaGF0IC5jaGF0LWhlYWRlciB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDAuNTVyZW0gMC41NXJlbSAwIDBcbiAgICB9XG5cbiAgICAuY2hhdC1hcHAgLmNoYXQtaGlzdG9yeSB7XG4gICAgICAgIGhlaWdodDogMzAwcHg7XG4gICAgICAgIG92ZXJmbG93LXg6IGF1dG9cbiAgICB9XG59XG5cbi5jaGF0LWlucHV0IHtcblxuICAgIGJvdHRvbTogMDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogNjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgd2lkdGg6IDkzJTtcbiAgICBwYWRkaW5nOiAxMHB4O1xufVxuXG4uY2hhdC1pbnB1dCBpbnB1dCB7XG4gICAgZmxleDogMTtcbiAgICBwYWRkaW5nOiA4cHg7XG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgIG91dGxpbmU6IG5vbmU7XG59XG5cbi5jaGF0LWlucHV0IGJ1dHRvbiB7XG4gICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgI2ZmOWI3YWZhLCAjZWFjNjM2KTtcbiAgICAvKiBDb3VsZXVyIGRlIHN1cnZvbCBsw4PCqWfDg8KocmVtZW50IHBsdXMgZm9uY8ODwqllICovXG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5jaGF0LWlucHV0IGJ1dHRvbjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjZjI4ZDZjZmEsICNmOGQ4NTcpO1xuICAgIC8qIENvdWxldXIgZGUgc3Vydm9sIGzDg8KpZ8ODwqhyZW1lbnQgcGx1cyBmb25jw4PCqWUgKi9cbn1cblxuXG5cbi5tZXNzYWdlLWNvbnRlbnQge1xuICAgIGZvbnQtZmFtaWx5OiAnU2Vnb2UgVUknLCBUYWhvbWEsIEdlbmV2YSwgVmVyZGFuYSwgc2Fucy1zZXJpZjtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgY29sb3I6ICMzMzM7XG4gICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgIHBhZGRpbmc6IDlweCAwcHg7XG4gICAgbWFyZ2luOiAwO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["GoogleGenerativeAI","i0","ChatComponent","constructor","auth","http","router","_serviceAuth","generative","ngOnInit","user","navigate","getEmailInitial","email","multiFactor","length","charAt","toUpperCase","sendMessage","messages","push","role","content","userInput","model","getGenerativeModel","result","generateContent","resp","response","text","onKeyPress","event","key","signOut","then","console","log","catch","error","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\ayoub\\OneDrive\\Bureau\\Projet-ChatAPI-Angular-main\\src\\app\\Chat\\chat\\chat.component.ts","C:\\Users\\ayoub\\OneDrive\\Bureau\\Projet-ChatAPI-Angular-main\\src\\app\\Chat\\chat\\chat.component.html"],"sourcesContent":["import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { Router } from '@angular/router';\nimport { GoogleGenerativeAI } from '@google/generative-ai';\nimport { AuthService } from 'src/app/Service/auth.service';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.css']\n})\nexport class ChatComponent implements OnInit {\n\n  generative!: GoogleGenerativeAI;\n\n  constructor(public auth: AngularFireAuth, private http: HttpClient, private router: Router, public _serviceAuth: AuthService) {\n    this.generative = new GoogleGenerativeAI('AIzaSyD77VYqM_LsBJGGuHPb0M778C56JNXucqI')\n\n  }\n\n  ngOnInit(): void {\n    if (this._serviceAuth.user == null) {\n      this.router.navigate(['/']);\n    }\n  }\n\n  getEmailInitial(): string {\n    const email = this._serviceAuth.user.multiFactor.user.email;\n    if (email && email.length > 0) {\n      return email.charAt(0).toUpperCase(); // Retourne le premier caractère en majuscule\n    } else {\n      return ''; // Retourne une chaîne vide si l'e-mail est vide\n    }\n  }\n\n  userInput: string = '';\n\n  messages: { role: string; content: string; }[] = [];\n\n\n  async sendMessage() {\n    this.messages.push({ role: \"user\", content: this.userInput });\n\n    const model = this.generative.getGenerativeModel({ model: 'gemini-pro' });\n    const result = await model.generateContent(this.userInput);\n\n    this.userInput = '';\n\n    const resp = await result.response;\n    const text = resp.text();\n\n    this.messages.push({ role: \"system\", content: text });\n  }\n\n  onKeyPress(event: KeyboardEvent) {\n    if (event.key === \"Enter\") {\n      this.sendMessage();\n    }\n  }\n\n  signOut() {\n    this.auth.signOut()\n      .then(() => {\n        this._serviceAuth.user = null;\n        console.log('Déconnexion réussie!');\n        this.router.navigate(['/']);\n      })\n      .catch((error) => {\n        console.error('Erreur lors de la déconnexion:', error);\n      });\n  }\n}\n\n","<link\n  href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\"\n  rel=\"stylesheet\"\n  integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\"\n  crossorigin=\"anonymous\"\n/>\n\n<body>\n  <div class=\"container\">\n    <div class=\"row clearfix\">\n      <div class=\"col-lg-12\">\n        <div class=\"chat\">\n          <div class=\"chat-header clearfix\">\n            <div class=\"row\">\n              <div class=\"col-lg-6\" style=\"display: flex\">\n                <div class=\"rounded-box\"><span>{{ getEmailInitial() }}</span></div>\n                <div>\n                  <h5> {{_serviceAuth.user.multiFactor.user.email}} </h5>\n                  <p style=\"margin-top: -6px; font-size: small\">\n                   {{_serviceAuth.user.multiFactor.user.uid}}\n                  </p>\n                  <button (click)=\"signOut()\" class=\"btn btn-warning\">Déconnexion</button>\n\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"chat-history\" style=\"height: 480px; overflow-y: auto\">\n            <ul *ngFor=\"let message of messages\">\n              <li class=\"clearfix\">\n                <div\n                  class=\"message my-message-chat\"\n                  *ngIf=\"message.role === 'user'\"\n                >\n                  {{ message.content }}\n                </div>\n              </li>\n              <li class=\"clearfix\">\n                <div\n                  class=\"message my-message-user\"\n                  *ngIf=\"message.role === 'system'\"\n                >\n                  <pre class=\"message-content\"> {{ message.content }} </pre>\n                </div>\n              </li>\n            </ul>\n          </div>\n          <div class=\"chat-message clearfix\">\n            <div class=\"chat-input\">\n              <input\n                [(ngModel)]=\"userInput\"\n                type=\"text \"\n                class=\"fill\"\n                (keypress)=\"onKeyPress($event)\"\n                placeholder=\"Tapez un message...\"\n              />\n              <button\n                (click)=\"sendMessage()\"\n                style=\"color: black\"\n                id=\"sendButton\"\n              >\n                Envoyer\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</body>\n<!-- chat.component.html -->\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}